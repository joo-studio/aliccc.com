!function(t){t.fn.linenumbers=function(e){var s=t.extend({col_width:"25px",start:1,digits:4},e);return this.each(function(){parseInt(t(this).css("width"))-parseInt(s.col_width)+"px";t(this).parent().append('<textarea class="linenumber" disabled="disabled" style="width:'+s.col_width+'"></textarea>');var e=t(this).parent().find('textarea[disabled="disabled"]');t(this).bind("blur focus change keyup keydown",function(){var n="\n"+t(this).val();n=n.match(/[^\n]*\n[^\n]*/gi);var r="",a="",l="";for(i=0;i<s.digits;i++)a+=" ";t.each(n,function(t,i){0!=t&&(r+="\n"),lencheck=t+s.start+"!",l=a.substr(lencheck.length-1),r+=l+(t+s.start)+i.replace(/\n/gi,"").replace(/./gi," ").substr(s.digits+1)}),t(e).val(r),t(e).scrollTop(t(this).scrollTop())}),t(this).scroll(function(){t(e).scrollTop(t(this).scrollTop())}),t(this).trigger("keyup")})}}(jQuery);